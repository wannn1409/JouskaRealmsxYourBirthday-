/* =========================
   HELPER
========================= */
function show(id) {
  document.getElementById(id).classList.remove('hidden');
}

function hide(id) {
  document.getElementById(id).classList.add('hidden');
}

/* =========================
   FLOW LOGIC
========================= */

// STEP 1 â†’ dari FORM ke KONFIRMASI NAMA
function toNameCheck() {
  const name = document.getElementById('nameInput').value.trim();
  const kelas = document.getElementById('classInput').value.trim();
  const gender = document.getElementById('genderInput').value;

  if (!name || !kelas || !gender) {
    alert('Lengkapi dulu ya datanya ðŸ˜Š');
    return;
  }

  hide('formSection');
  show('nameCheck');

  document.getElementById('nameText').innerText =
    `Ohh, nama kamu ${name} ya?`;
}

// STEP 2 â†’ balik ke FORM
function backToForm() {
  hide('nameCheck');
  hide('classCheck');
  hide('readySection');
  show('formSection');
}

// STEP 3 â†’ KONFIRMASI KELAS
function toClassCheck() {
  hide('nameCheck');
  show('classCheck');

  const kelas = document.getElementById('classInput').value.trim();

  document.getElementById('classText').innerText =
    `Kamu dari kelas ${kelas}, benar?`;
}

// STEP 4 â†’ TRANSISI SEBELUM UCAPAN
function toFinalReady() {
  hide('classCheck');
  show('readySection');
}

// STEP 5 â†’ HALAMAN UCAPAN
function toResult() {
  hide('readySection');
  show('resultSection');

  const name = document.getElementById('nameInput').value.trim();
  const kelas = document.getElementById('classInput').value.trim();
  const gender = document.getElementById('genderInput').value;

  // Nama utama
  document.getElementById('finalName').innerText =
    `Untuk ${name} ðŸ¤`;

  // Info tambahan (opsional)
  let genderText =
    gender === 'Laki-laki' ? 'hebat' : 'luar biasa';

  document.getElementById('finalInfo').innerText =
    `Anak kelas ${kelas} yang ${genderText}`;

  // (opsional) confetti otomatis
  startConfetti();
}

/* =========================
   CONFETTI (OPSIONAL)
========================= */
const canvas = document.getElementById('confetti');
if (canvas) {
  const ctx = canvas.getContext('2d');
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;

  let confettis = [];

  function startConfetti() {
    confettis = Array.from({ length: 150 }, () => ({
      x: Math.random() * canvas.width,
      y: Math.random() * canvas.height - canvas.height,
      r: Math.random() * 6 + 2,
      d: Math.random() * 5 + 2,
      color: `hsl(${Math.random() * 360}, 100%, 50%)`
    }));
    animateConfetti();
  }

  function animateConfetti() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    confettis.forEach(c => {
      ctx.beginPath();
      ctx.fillStyle = c.color;
      ctx.arc(c.x, c.y, c.r, 0, Math.PI * 2);
      ctx.fill();
      c.y += c.d;
      if (c.y > canvas.height) c.y = -10;
    });
    requestAnimationFrame(animateConfetti);
  }
}
